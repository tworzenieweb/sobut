/* Javascript Slider */
(function($){  

    $.fn.s3Slider = function(vars) {
        var element     = this;
        var timeOut     = (vars != undefined && vars.timeOut != undefined) ? vars.timeOut : 5000;
        var speedOut    = (vars != undefined && vars.speedOut != undefined) ? vars.speedOut : 300;		
		var currentSlide= 0;
		var nextSlide	= 0;
		var mover		= false;
		var items       = $("#" + element[0].id + " .sliderContent .sliderImage");
		
		$(element).mouseover(function() {mover=true;});
		$(element).mouseout(function() {mover=false;});
				
		var items_menu=jQuery("#" + element[0].id + " ul.sliderMenu a");
		items_menu.each(function(i) {			
			jQuery(this).attr("id", element[0].id +"_menuitem"+i);
			jQuery(this).click( function(){
				if(nextSlide!=i){
					mover=true;
					nextSlide=i;
					switchSlide();
					}
				return false;		
			});			
		});
		
		var switchSlide = function() {	
			if(!mover){
				nextSlide=(currentSlide+1>=items_menu.length)?0:currentSlide+1;
			}
				items_menu.each(function(i) {jQuery(this).removeClass("current");});
				jQuery("#" + element[0].id + "_menuitem"+nextSlide).addClass("current");
				if(nextSlide!=currentSlide){
					$(items[currentSlide]).fadeOut((speedOut), function() {
						currentSlide=nextSlide;
						$(items[nextSlide]).fadeIn(speedOut);
						});
					}			
				}
		currentSlide=items_menu.length-1;
		switchSlide();
		setInterval(switchSlide, timeOut);
    };  
})(jQuery);